<?phpfunction __autoload($class_name) {require_once "../../classes/".$class_name.".php"; }//автоподключение нужного класса$orderswitcher = new OrderSwitchers();//создание объекта класса OrderSwitchersforeach($_GET as $var=>$var_value)$orderswitcher->write($var, $var_value);//запись в БД свойств переключателя, введенных на предыдущей страницеsetcookie("fix", $orderswitcher->read("fix")); // запись в  cookie способа крепления //print_r($_GET);?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>  <title>Конструктор переключателя</title><meta http-equiv="Content-type" content="text/html; charset=utf8"/><meta name="Keywords" content="Конструктор переключателя, конфигуратор переключателя" /><meta name="Description" content="On-line разработка переключателя по техническим требованиям заказчика" /><meta name="Author" content="Дмитрий Коржов" /><link href="/images/icon1.ico" rel="shortcut icon" type="image/x-icon" /><link  rel="stylesheet" type="text/css" href="/styles/styles.css" /></head>  <body>  <?php require_once "../../blocks/header.html";?> <div id = "content" >  <?php require_once "../../blocks/left_panel.html";?>   <div id = "main_content"> <?php if($_COOKIE["construct_mode"] == "edit"): ?><h1>Редактор переключателя</h1><?php else: ?><h1>Конструктор переключателя</h1><?php endif; ?>	<h2>Шаг 6 Количество контактов и положений ручки</h2><center><h3>Введите количество положений ручки и количество контактов переключателя</h3> <form name = 'form6' action="#" method = "get" > Количество положений <select name="qpos">	<script type='text/javascript'>//alert(document.cookie);if(getCookie("switcher_handle") == "key"){ var max_qpos = 5;//если ключ максимальное количество положений 5 var max_qcont = 12;//если ключ максимальное количество контактов 12 }else if((getCookie("fix") == "P") && (getCookie("current") < 30)){ var max_qpos = 12; var max_qcont = 10;//если коробка и ток 10-25А максимальное количество контактов 10}else if((getCookie("fix") == "P") && (getCookie("current") > 30)){ var max_qpos = 12; var max_qcont = 6;//если коробка и ток 32-160А максимальное количество контактов 6}else{ var max_qpos = 12; var max_qcont = 24; }for (var i=2; i<=max_qpos; i++)	document.write("<option value='"+i+"'>"+i+"</option>");	document.write("</select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Количество контактных групп <select name='qcont'>");for (var j=1; j<=max_qcont; j++)  	document.write("<option value='"+j+"'>"+j+"</option>"); document.write("</select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type = 'button' onClick = 'clicked()' name = 'start' value = 'Ввод'/></form></center>");function clicked() {  setCookie("switcher_qpos", document.form6.qpos.value); // запись количества положений в  cookie  setCookie("switcher_qcont", document.form6.qcont.value); // запись количества контактов в cookie  var strCD = "";//строка диаграммы замыканий for (var j=0; j < document.form6.qcont.value; j++)   for (var i=0; i < document.form6.qpos.value; i++)   strCD += 'o';//обнуление диаграммы замыканийsetCookie("switcher_cdiag", strCD);//запись диаграммы замыканий в cookie	  var jumpStr = ""; setCookie("switcher_jump", jumpStr);//очистка перемычек в cookie  setCookie("switcher_qJump", 0);//обнуление количества перемычек в cookie  var mark = "";  for(m=1; m <= document.form6.qpos.value; m++)	mark += m +"$";setCookie("switcher_mark", mark);//запись маркировки по умолчанию в cookie	  //alert(getCookie("switcher_qpos")); // Выводим cookie  //alert(getCookie("switcher_qcont")); // Выводим cookiedocument.location = "constr_switcher7.php?qpos="+document.form6.qpos.value+"&qcont="+document.form6.qcont.value;  } function setCookie(name, value) {    document.cookie = name + "=" + value;  }  function getCookie(name) {    var r = document.cookie.match("(^|;) ?" + name + "=([^;]*)(;|$)");    if (r) return r[2];    else return "";  }</script>		</div> </div>	 <div class="clear"></div> <?php require_once "../../blocks/footer.html";?> </body></html>