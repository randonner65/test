<?phpfunction __autoload($class_name) {require_once "../../classes/".$class_name.".php"; }//автоподключение нужного класса$orderswitcher = new OrderSwitchers();//создание объекта класса OrderSwitchers//print_r($_GET);foreach($_GET as $var=>$var_value)	$orderswitcher->write($var, $var_value);//запись в БД свойств переключателя, введенных на предыдущей странице	if($orderswitcher->read("handle") == "key" && $orderswitcher->read("qpos") == 5) {//если ключ и 5 положений		$orderswitcher->write("moment", 0);//запись в БД отсутствие самовозврата			$orderswitcher->write("angle", 8);//запись в БД угла 45 градусов			$orderswitcher->write("initpos", "A");//запись в БД нач. пол. А	 	header( 'Location: constr_switcher11.php', true, 303 );//на вывод результата конструктора	}else//если ключ или больше 3 положений или если ток больше 30 А или если желто-черная ручка или если желто-красная ручка или если больше 6 галет if($orderswitcher->read("handle") == "key" || 	$orderswitcher->read("qpos") > 3 ||		$orderswitcher->read("current") > 30 || 	$orderswitcher->read("handle") == "ub" ||		$orderswitcher->read("handle") == "ur" ||		$orderswitcher->read("qcont") > 12 ||	$orderswitcher->read("fix") == "B" ||	($orderswitcher->read("fix") == "P" && $orderswitcher->read("qcont") > 8)){ 			$orderswitcher->write("moment", 0);//запись в БД отсутствие самовозврата				if($orderswitcher->read("qpos") == 7 || $orderswitcher->read("qpos") == 8){//если 7 или 8 положений									$orderswitcher->write("angle", 8);//запись в БД угла 45 градусов				//echo($orderswitcher->read("qpos"));			header( 'Location: constr_switcher10.php', true, 303 );//на выбор начального положения		}		else	if($orderswitcher->read("qpos") > 8 ){//больше 8 положений				$orderswitcher->write("angle", 12);//запись в БД угла 30 градусов			header( 'Location: constr_switcher10.php', true, 303 );//на выбор начального положения		}else	header( 'Location: constr_switcher9.php', true, 303 );//на выбор угла		}else	?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>  <title>Конструктор переключателя</title><meta http-equiv="Content-type" content="text/html; charset=utf8"/><meta name="Keywords" content="Конструктор переключателя, конфигуратор переключателя" /><meta name="Description" content="On-line разработка переключателя по техническим требованиям заказчика" /><meta name="Author" content="Дмитрий Коржов" /><link href="/images/icon1.ico" rel="shortcut icon" type="image/x-icon" /><link  rel="stylesheet" type="text/css" href="/styles/styles.css" /></head>  <body>  <?php require_once "../../blocks/header.html";?> <div id = "content" >  <?php require_once "../../blocks/left_panel.html";?>   <div id = "main_content"> <?php if($_COOKIE["construct_mode"] == "edit"): ?><h1>Редактор переключателя</h1><?php else: ?><h1>Конструктор переключателя</h1><?php endif; ?>	<h2>Шаг 8 Самовозврат</h2><center><h3>Выберите один из двух вариантов: самовозврат или фиксированные положения ручки</h3></center><table  class="schema_search" width="100%" border="0" align="center" >	<tr>		<td>				<a  href = 'constr_switcher8a.php?moment=0' title = "Фиксированные положения ручки">Фиксированные положения ручки</a>	</td>		<td>				<a  href = 'constr_switcher8a.php?moment=1' title = "С самовозвратом">С самовозвратом</a>		</td>					</tr>	<tr>		<td>			<a href = 'constr_switcher8a.php?moment=0' title = "Фиксированные положения ручки">			<img class = "img"   src = '../../foto/foto_switcher.php?moment=0			<?php			if($orderswitcher->read("fix") == "P") echo "&box=ec400c5";			echo '&qdesk='.ceil($orderswitcher->read("qcont") / 2);			echo '&current='.$orderswitcher->read("current");			echo '&handle='.$orderswitcher->read("handle");			echo '&fix='.$orderswitcher->read("fix");			echo '&board='.$orderswitcher->read("board");			echo '&ip54='.$orderswitcher->read("ip54");			?>'			height = "300px"  alt = "Фиксированные положения ручки"></a>		</td>		<td>			<a href = 'constr_switcher8a.php?moment=1' title = "С самовозвратом">			<img class = "img"  src = '../../foto/foto_switcher.php?moment=1			<?php			if($orderswitcher->read("fix") == "P") echo "&box=ec400c5";			echo '&qdesk='.ceil($orderswitcher->read("qcont") / 2);			echo '&current='.$orderswitcher->read("current");			echo '&handle='.$orderswitcher->read("handle");			echo '&fix='.$orderswitcher->read("fix");			echo '&board='.$orderswitcher->read("board");			echo '&ip54='.$orderswitcher->read("ip54");			?>'			height = "300px"  alt = "С самовозвратом"></a>		</td>			</tr>	</table>	<script type='text/javascript'>function clicked(momentary) {  setCookie("switcher_momentary", momentary); // Устанавливаем cookie  //alert(getCookie("switcher_momentary")); // Выводим cookie//if(momentary == "yes" && getCookie("switcher_qpos") == 3) document.location = "constr_switcher8a.php";//на выбор возвратных положений//else document.location = "constr_switcher9.php";//на выбор угла} function setCookie(name, value) {    document.cookie = name + "=" + value;  }  function getCookie(name) {    var r = document.cookie.match("(^|;) ?" + name + "=([^;]*)(;|$)");    if (r) return r[2];    else return "";  }</script>		</div> </div>	 <div class="clear"></div> <?php require_once "../../blocks/footer.html";?> </body></html>